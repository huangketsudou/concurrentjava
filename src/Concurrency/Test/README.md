### 并发程序的测试

并发程序测试包括两类：

- 安全性测试：不会发生任何错误行为
- 活跃性测试：某个良好的行为终究会发生

#### 正确性测试

在为某个并发类做单元测试时，需要找出检查的不变性条件和后验条件

thread.getState可以查看线程的状态，就是java里面的六种线程状态。

#### 安全性测试

#### 性能测试

#### 避免性能测试陷阱

##### 垃圾回收

当在测试过程中发生了垃圾回收，可能会导致测试性能的变化，防止措施：

1. 确保垃圾回收在测试其间不发生
2. 确保垃圾回收操作在测试其间执行多次

##### 动态编译

解释执行:类第一次加载时

编译过程：

编译后执行：执行最快，一般程序中频繁执行的部分会被转为该执行方式

##### 代码路径不真实采样

编译器编译代码时，回对已编译的代码进行优化

##### 不真实的竞争程度

尽量模拟典型应用程序中的线程本地计算量以及开发协调开销

##### 无用代码消除

基准测试代码很容易将代码中对输出无用的代码消除，导致测试不准确。

